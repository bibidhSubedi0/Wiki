@model Tuple<NoteBoxModel,List<NoteMetadataModel>>
@{
    ViewData["Title"] = Model.Item1.BoxName;
}

<!-- Breadcrumb -->
<nav aria-label="breadcrumb" class="mb-4">
    <ol class="breadcrumb" style="background: none; padding: 0;">
        <li class="breadcrumb-item">
            <a asp-action="Index" asp-controller="Home" style="color: var(--text-muted);">
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 0.25rem;">
                    <path d="m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293l6-6zm5-.793V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z" />
                    <path d="M7.293 1.5a1 1 0 0 1 1.414 0l6.647 6.646a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708L7.293 1.5z" />
                </svg>
                Home
            </a>
        </li>
        <li class="breadcrumb-item active" aria-current="page" style="color: var(--text-secondary);">
            @Model.Item1.BoxName
        </li>
    </ol>
</nav>

<!-- Header -->
<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h1 class="h2 mb-2" style="color: var(--text-primary); font-weight: 600;">
            <svg width="28" height="28" fill="var(--accent)" viewBox="0 0 16 16" style="margin-right: 0.5rem;">
                <path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zM2.5 2a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zM1 10.5A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3z" />
            </svg>
            @Model.Item1.BoxName
        </h1>
        <p class="text-secondary mb-0">@Model.Item2.Count notes in this collection</p>
    </div>
    <a asp-action="Create" asp-route-noteBoxGuid="@Model.Item1.NoteBoxGuid" class="btn btn-primary">
        <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 0.25rem;">
            <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z" />
        </svg>
        New Note
    </a>
</div>

@if (Model.Item2.Any())
{
    <!-- Notes Grid -->
    <div class="row g-4">
        @foreach (var note in Model.Item2)
        {
            <div class="col-lg-6 col-xl-4">
                <a asp-action="Index" asp-controller="Note" asp-route-noteGuid="@note.NoteGuid" asp-route-noteBoxGuid="@Model.Item1.NoteBoxGuid" class="link-card">
                    <div class="card h-100">
                        <div class="card-body">
                            <div class="d-flex align-items-start justify-content-between mb-3">
                                <h5 class="card-title mb-0" style="color: var(--text-primary); font-weight: 600; line-height: 1.3;">
                                    @note.NoteName
                                </h5>
                                <svg width="20" height="20" fill="var(--text-muted)" viewBox="0 0 16 16" style="flex-shrink: 0; margin-left: 0.5rem;">
                                    <path d="M4 1h5v1H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V5h1v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2z" />
                                    <path d="M9 4.5V1l5 5h-3.5A1.5 1.5 0 0 1 9 4.5z" />
                                </svg>
                            </div>

                            <div class="mb-3">
                                <div class="text-muted small mb-1">
                                    <svg width="12" height="12" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 0.25rem;">
                                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                                        <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z" />
                                    </svg>
                                    Created: @note.CreatedAt.ToString("MMM dd, yyyy")
                                </div>
                                @if (note.UpdatedAt != note.CreatedAt)
                                {
                                    <div class="text-muted small">
                                        <svg width="12" height="12" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 0.25rem;">
                                            <path d="M1 3.5a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9zM1.5 4v8h13V4h-13z" />
                                            <path d="M8.646 6.646a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L10.293 9 8.646 7.354a.5.5 0 0 1 0-.708zm-1.292 0a.5.5 0 0 0-.708 0l-2 2a.5.5 0 0 0 0 .708l2 2a.5.5 0 0 0 .708-.708L5.707 9l1.647-1.646a.5.5 0 0 0 0-.708z" />
                                        </svg>
                                        Updated: @note.UpdatedAt.ToString("MMM dd, yyyy")
                                    </div>
                                }
                            </div>

                            <div class="d-flex align-items-center text-muted">
                                <svg width="14" height="14" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 0.5rem;">
                                    <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z" />
                                </svg>
                                <small>Click to open</small>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
        }
    </div>
}
else
{
    <!-- Empty State -->
    <div class="text-center py-5">
        <div class="mb-4">
            <svg width="64" height="64" fill="var(--text-muted)" viewBox="0 0 16 16" style="opacity: 0.6;">
                <path d="M4 1h5v1H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V5h1v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2z" />
                <path d="M9 4.5V1l5 5h-3.5A1.5 1.5 0 0 1 9 4.5z" />
            </svg>
        </div>
        <h4 style="color: var(--text-secondary); font-weight: 500;">No notes yet</h4>
        <p class="text-muted mb-4">Create your first note to get started</p>
        <a asp-action="Create" asp-route-noteBoxGuid="@Model.Item1.NoteBoxGuid" class="btn btn-primary">
            <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 0.25rem;">
                <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z" />
            </svg>
            Create Your First Note
        </a>
    </div>
}